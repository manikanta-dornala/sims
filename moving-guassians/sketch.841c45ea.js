function i(i){return i&&i.__esModule?i.default:i}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},s={},o=t.parcelRequire5b7a;null==o&&((o=function(i){if(i in e)return e[i].exports;if(i in s){var t=s[i];delete s[i];var o={id:i,exports:{}};return e[i]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(i,t){s[i]=t},t.parcelRequire5b7a=o);var a=o("7Pz0b");class h{constructor(){this.isPaused=!1,this.particleSize=5,this.lineMaxDist=150,this.WallThickness=0,this.WallBuffer=50,this.InitialPopulation=160,this.MaxSpeed=10,this.MinSpeed=8,this.MaxForce=.2}}var n;a=o("7Pz0b");class r{constructor(i){this.p5=i,this.position=this.p5.createVector(Math.random()*i.windowWidth,Math.random()*i.windowHeight),this.heading=2*Math.random()*this.p5.PI,this.velocity=this.p5.createVector(this.p5.cos(this.heading),this.p5.sin(this.heading)).normalize().mult(window.params.MaxSpeed*Math.random()),this.color=this.p5.color(255*Math.random(),255*Math.random(),255*Math.random()),this.size=5,this.mass=1}draw(){this.p5.push(),this.p5.translate(this.position.x,this.position.y),this.p5.fill(this.color),this.p5.ellipse(0,0,this.size,this.size),this.p5.fill(0,0,0),this.p5.pop()}step(t){var e=i(a).Vector.mult(t,this.mass);this.velocity.add(e),this.velocity.mag()<window.params.MinSpeed&&(this.velocity.normalize(),this.velocity.mult(window.params.MinSpeed)),this.velocity.limit(window.params.MaxSpeed),this.position.add(this.velocity),this.warpWorld()}warpWorld(){var i=this.p5.windowWidth,t=this.p5.windowHeight,e=window.params.WallBuffer;this.position.x<e?this.position.x=i-1.1*e:this.position.x>i-e&&(this.position.x=1.1*e),this.position.y<e?this.position.y=t-1.1*e:this.position.y>t-e&&(this.position.y=1.1*e)}}class p{constructor(i){this.centers=[],this.p5=i;for(let t=0;t<5;t++){let t=new r(this.p5);t.amplitude=5,t.sigma=i.createVector(20,20),this.centers.push(t)}this.img=this.p5.createImage(this.p5.windowWidth,this.p5.windowHeight),this.img.loadPixels()}run(){this.centers.forEach((i=>{this.p5.frameCount%2!=0&&i.draw(),i.step(this.p5.createVector(Math.random(),Math.random()))})),this.p5.frameCount%2!=0&&this.updateBackground()}updateBackground(){function i(i,t,e){let s=4*(t.x+t.y*i.width);i.pixels[s]=e.r,i.pixels[s+1]=e.g,i.pixels[s+2]=e.b,i.pixels[s+3]=e.a}let t,e;for(n=new Date,e=0;e<this.img.height;e++)for(t=0;t<this.img.width;t++){let s=this.p5.map(this.getColor({x:t,y:e}),0,1,0,255);i(this.img,{x:t,y:e},{r:255,g:s,b:s,a:255})}var s;s=new Date-n,s/=1e3,Math.round(s),console.log(s+" seconds"),this.img.updatePixels(),this.p5.image(this.img,0,0)}getColor(i){let t=0,e=this.p5.createVector(i.x,i.y);return this.centers.forEach((i=>{var s,o;t+=(s=e,(o=i).amplitude*Math.exp(-.5*s.dist(o.position)**2/o.sigma.x**2))})),t/this.centers.length}}new(i(a))((i=>{let t=!1,e=new h;window.params=e;let s=new p(i);window.simulation=s,window.p5=i,i.setup=()=>{var e=i.createCanvas(i.windowWidth,i.windowHeight);e.mouseOver((()=>{t=!0})),e.mouseOut((()=>{t=!1})),e.style("display","block"),e.parent("sketch-holder")},i.windowResized=()=>{i.resizeCanvas(i.windowWidth,i.windowHeight)},i.draw=()=>{s.run()}}));
//# sourceMappingURL=sketch.841c45ea.js.map
