function t(t){return t&&t.__esModule?t.default:t}var i=globalThis,e={},s={},r=i.parcelRequire5b7a;null==r&&((r=function(t){if(t in e)return e[t].exports;if(t in s){var i=s[t];delete s[t];var r={id:t,exports:{}};return e[t]=r,i.call(r.exports,r,r.exports),r.exports}var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}).register=function(t,i){s[t]=i},i.parcelRequire5b7a=r),r.register;var h=r("ayMG0"),n=r("cW1lX"),a=r("aRPiL"),o=r("a3QyA"),l=r("7Pz0b");class c{constructor(t){this.iter=0,this.max_iter=1e3,this.terminate=!1,this.current_path=[],this.current_path_length=()=>u(this.current_path,this.vertices),this.min_path=[],this.min_path_length=()=>u(this.min_path,this.vertices),this.reset(t)}init(){}next(){}reset(t){this.vertices=t,this.current_path=[],this.min_path=[],this.terminate=!1,this.init()}}class d{constructor(t=null){this.name=Math.ceil(20*Math.random()),t&&(this.position=t)}}function u(t,i){if(t.length<=1)return 0;let e=0;for(let h=0;h<t.length-1;h++){var s,r;e+=(s=i[t[h]],r=i[t[h+1]],s.position.dist(r.position))}return e}class m extends c{init(){for(let t=0;t<this.vertices.length;t++)this.current_path.push(t),this.min_path.push(t)}next(){!this.terminate&&(this.current_path_length(),function(t){for(var i=t.length-1;i>0;i--){var e=Math.floor(Math.random()*(i+1));!function(t,i,e){let s=t[i];t[i]=t[e],t[e]=s}(t,i,e)}}(this.current_path),this.current_path_length()<this.min_path_length()&&(this.min_path=[...this.current_path]),this.iter++,this.max_iter<=this.iter&&(this.terminate=!0))}}class p extends c{init(){this.frontier=[[0]],this.current_path=[0],this.min_path=[0],this.bestPath=[],this.bestPathLength=1/0}next(){if(this.terminate)return;let t=this.choose();this.expand(t).forEach(t=>{let i=u(t,this.vertices);t.length==this.vertices.length&&i<this.bestPathLength&&(this.bestPath=[...t],this.bestPathLength=i),this.current_path=[...t],this.min_path=[...this.bestPath],this.frontier.push(t)}),(this.max_iter<=this.iter||this.frontier.length<=0)&&(this.terminate=!0)}choose(){let t=this.frontier[0].length,i=0,e=this.frontier[0];for(let s=0;s<this.frontier.length;s++){let r=this.frontier[s],h=r.length;h<t&&(t=h,i=s,e=[...r])}return this.frontier.splice(i,1),e}expand(t){let i=[];return Array.from({length:this.vertices.length},(t,i)=>i).filter(i=>!t.includes(i)).forEach(e=>{i.push(t.concat([e]))}),i}constructor(...t){super(...t),this.frontier=[],this.bestPathLength=1/0}}class g{constructor(t){this.gridXSize=100,this.gridYSize=100,this.worldGrid=[],this.numVertices=6,this.vertices=[],this.algorithmOptions=[{value:"random-search",label:"RandomSearch"},{value:"branch-n-bound",label:"Branch and Bound"}],this.isActive=!1;for(let t=0;t<this.gridXSize;t++){this.worldGrid.push([]);for(let i=0;i<this.gridYSize;i++)this.worldGrid[t].push(null)}this.setAlgorithm(this.algorithmOptions[0].value)}setup(t){this.p5=t,this.vertices=[],this.createVertexs(10).forEach(t=>this.vertices.push(t))}run(){this.isActive&&this.search.next()}createVertexs(t){let i=[];for(let e=0;e<t;e++){let t=new d(this.newRandomPos());t.name=e,i.push(t)}return i}addVertex(t){this.vertices.push(t)}addVertexs(t){t.forEach(t=>this.vertices.push(t))}newRandomPos(){let i=new(t(l)).Vector(Math.floor(this.p5.random(5,this.gridXSize-5)),Math.floor(this.p5.random(5,this.gridYSize-5)));return null!=this.worldGrid[i.x][i.y]?this.newRandomPos():i}setAlgorithm(t){switch(t){case"random-search":default:this.search=new m(this.vertices);break;case"branch-n-bound":this.search=new p(this.vertices)}this.isActive=!1,this.search.reset(this.vertices)}getMinPathStr(){return`Minimum ${this.search.min_path.map(t=>this.vertices[t].name).join(",")} Length: ${Math.floor(this.search.min_path_length())}`}getCurrPathStr(){return`Current ${this.search.current_path.map(t=>this.vertices[t].name).join(",")} Length: ${Math.floor(this.search.current_path_length())}`}randomize(){this.vertices=[],this.createVertexs(this.numVertices).forEach(t=>this.vertices.push(t)),this.isActive=!1,this.search.reset(this.vertices)}}var l=r("7Pz0b");const f=t=>i=>{function e(e){i.beginShape(),i.fill(255,255,255),i.circle((e.position.x+.5)*i.width/t.gridXSize,(e.position.y+.5)*i.height/t.gridYSize,15),i.text(e.name,(e.position.x+1)*i.width/t.gridXSize,(e.position.y+1)*i.height/t.gridYSize),i.endShape()}function s(e,s=[255,255,255]){i.push(),i.beginShape(),i.stroke(s),i.strokeWeight(2),i.noFill();for(let s=0;s<e.length;s++){let r=t.vertices[e[s]];i.vertex((r.position.x+.5)*i.width/t.gridXSize,(r.position.y+.5)*i.height/t.gridYSize)}i.endShape(),i.pop()}i.setup=()=>{let e=i.createCanvas(i.windowWidth,.8*i.windowHeight);e.mouseOver(()=>{}),e.mouseOut(()=>{}),t.setup(i),t.randomize()},i.windowResized=()=>{i.resizeCanvas(i.windowWidth,.8*i.windowHeight)},i.draw=()=>{i.background(0,0,0),function(){i.beginShape();for(let e=0;e<t.gridXSize;e++)i.stroke(255,255,255,10),i.line(e*i.width/t.gridXSize,0,e*i.width/t.gridXSize,i.height);for(let e=0;e<t.gridYSize;e++)i.stroke(255,255,255,10),i.line(0,e*i.height/t.gridYSize,i.width,e*i.height/t.gridYSize);i.endShape()}(),t.vertices.map(e),s(t.search.current_path,[255,255,255,100]),s(t.search.min_path,[0,255,150]),i.fill(255,255,255),i.textSize(20),i.text(t.getCurrPathStr(),20,20),i.fill(0,255,150),i.textSize(20),i.text(t.getMinPathStr(),20,50),t.run()}};var v=r("acw62");class x extends t(v).Component{constructor(i){super(i),this.ref=t(v).createRef(),this.sketch=f(i.simulation)}componentDidMount(){this.p5ref=new(t(l))(this.sketch,this.ref.current)}render(){return(0,h.jsx)("div",{ref:this.ref})}}class _ extends t(v).Component{constructor(t){super(t),this.simulation=new g(t),this.simulation.setAlgorithm(""),this.Sketch=f(this.simulation)}render(){return(0,h.jsxs)("div",{className:"container-fluid",children:[(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsx)(o.default,{defaultValue:this.simulation.algorithmOptions[0],options:this.simulation.algorithmOptions,onChange:t=>{this.simulation.setAlgorithm(t.value)}})}),(0,h.jsx)("div",{className:"col-md-1",children:(0,h.jsx)(n,{type:"number",className:"form-control align-middle align-right",min:3,max:10,step:1,defaultValue:this.simulation.numVertices,onChange:t=>{this.simulation.numVertices=t,this.simulation.randomize()},label:"Cities"})}),(0,h.jsx)("div",{className:"col-md-2",children:(0,h.jsx)("button",{className:"btn btn-primary",onClick:t=>{this.simulation.randomize()},children:"randomize"})}),(0,h.jsx)("div",{className:"col-md-2",children:(0,h.jsx)("button",{className:"btn btn-success",onClick:t=>{this.simulation.isActive=!this.simulation.isActive},disabled:this.simulation.isActive,children:"start/stop"})})]}),(0,h.jsx)("div",{className:"row"}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)(x,{simulation:this.simulation})})})]})}}(0,a.createRoot)(document.getElementById("app")).render((0,h.jsx)(_,{}));
//# sourceMappingURL=index.71b8c9b4.js.map
