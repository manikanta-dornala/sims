function t(t){return t&&t.__esModule?t.default:t}var e=globalThis,i={},s={},r=e.parcelRequire5b7a;null==r&&((r=function(t){if(t in i)return i[t].exports;if(t in s){var e=s[t];delete s[t];var r={id:t,exports:{}};return i[t]=r,e.call(r.exports,r,r.exports),r.exports}var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}).register=function(t,e){s[t]=e},e.parcelRequire5b7a=r),r.register;var h=r("ayMG0"),n=r("aRPiL"),a=r("a3QyA"),o=r("7Pz0b");class c{constructor(t){this.iter=0,this.max_iter=1e3,this.terminate=!1,this.current_path=[],this.current_path_length=()=>d(this.current_path,this.vertices),this.min_path=[],this.min_path_length=()=>d(this.min_path,this.vertices),this.reset(t)}init(){}next(){}reset(t){this.vertices=t,this.current_path=[],this.min_path=[],this.terminate=!1,this.init()}}class l{constructor(t=null){this.name=Math.ceil(20*Math.random()),t&&(this.position=t)}}function d(t,e){if(t.length<=1)return 0;let i=0;for(let h=0;h<t.length-1;h++){var s,r;i+=(s=e[t[h]],r=e[t[h+1]],s.position.dist(r.position))}return i}class u extends c{init(){for(let t=0;t<this.vertices.length;t++)this.current_path.push(t),this.min_path.push(t)}next(){!this.terminate&&(this.current_path_length(),function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1));!function(t,e,i){let s=t[e];t[e]=t[i],t[i]=s}(t,e,i)}}(this.current_path),this.current_path_length()<this.min_path_length()&&(this.min_path=[...this.current_path]),this.iter++,this.max_iter<=this.iter&&(this.terminate=!0))}}class m extends c{init(){this.frontier=[[0]],this.current_path=[0],this.min_path=[0],this.bestPath=[],this.bestPathLength=1/0}next(){if(this.terminate)return;let t=this.choose();this.expand(t).forEach(t=>{let e=d(t,this.vertices);t.length==this.vertices.length&&e<this.bestPathLength&&(this.bestPath=[...t],this.bestPathLength=e),this.current_path=[...t],this.frontier.push(t)}),this.min_path=[...this.bestPath],(this.max_iter<=this.iter||this.frontier.length<=0)&&(this.terminate=!0)}choose(){let t=this.frontier[0].length,e=0,i=this.frontier[0];for(let s=0;s<this.frontier.length;s++){let r=this.frontier[s],h=r.length;h<t&&(t=h,e=s,i=[...r])}return this.frontier.splice(e,1),i}expand(t){let e=[];return Array.from({length:this.vertices.length},(t,e)=>e).filter(e=>!t.includes(e)).forEach(i=>{e.push(t.concat([i]))}),e}constructor(...t){super(...t),this.frontier=[],this.bestPathLength=1/0}}class p{constructor(t){this.gridXSize=100,this.gridYSize=100,this.worldGrid=[],this.vertices=[],this.algorithmOptions=[{value:"random-search",label:"RandomSearch"},{value:"branch-n-bound",label:"Branch and Bound"}],this.isActive=!1;for(let t=0;t<this.gridXSize;t++){this.worldGrid.push([]);for(let e=0;e<this.gridYSize;e++)this.worldGrid[t].push(null)}this.setAlgorithm(this.algorithmOptions[0].value)}setup(t){this.p5=t,this.vertices=[],this.createVertexs(10).forEach(t=>this.vertices.push(t))}run(){this.isActive&&this.search.next()}createVertexs(t){let e=[];for(let i=0;i<t;i++){let t=new l(this.newRandomPos());t.name=i,e.push(t)}return e}addVertex(t){this.vertices.push(t)}addVertexs(t){t.forEach(t=>this.vertices.push(t))}newRandomPos(){let e=new(t(o)).Vector(Math.floor(this.p5.random(5,this.gridXSize-5)),Math.floor(this.p5.random(5,this.gridYSize-5)));return null!=this.worldGrid[e.x][e.y]?this.newRandomPos():e}setAlgorithm(t){switch(t){case"random-search":default:this.search=new u(this.vertices);break;case"branch-n-bound":this.search=new m(this.vertices)}this.isActive=!1,this.search.reset(this.vertices)}getMinPathStr(){return`Minimum ${this.search.min_path.map(t=>this.vertices[t].name).join(",")} Length: ${Math.floor(this.search.min_path_length())}`}getCurrPathStr(){return`Current ${this.search.current_path.map(t=>this.vertices[t].name).join(",")} Length: ${Math.floor(this.search.current_path_length())}`}randomize(){this.vertices=[],this.createVertexs(6).forEach(t=>this.vertices.push(t)),this.isActive=!1,this.search.reset(this.vertices)}}var o=r("7Pz0b");const g=t=>e=>{function i(i){e.beginShape(),e.fill(255,255,255),e.circle((i.position.x+.5)*e.width/t.gridXSize,(i.position.y+.5)*e.height/t.gridYSize,15),e.text(i.name,(i.position.x+1)*e.width/t.gridXSize,(i.position.y+1)*e.height/t.gridYSize,600),e.endShape()}function s(i,s=[255,255,255]){e.push(),e.beginShape(),e.stroke(s),e.strokeWeight(2),e.noFill();for(let s=0;s<i.length;s++){let r=t.vertices[i[s]];e.vertex((r.position.x+.5)*e.width/t.gridXSize,(r.position.y+.5)*e.height/t.gridYSize)}e.endShape(),e.pop()}e.setup=()=>{let i=e.createCanvas(e.windowWidth,.8*e.windowHeight);i.mouseOver(()=>{}),i.mouseOut(()=>{}),t.setup(e),t.randomize()},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,.8*e.windowHeight)},e.draw=()=>{e.background(0,0,0),function(){e.beginShape();for(let i=0;i<t.gridXSize;i++)e.stroke(255,255,255,10),e.line(i*e.width/t.gridXSize,0,i*e.width/t.gridXSize,e.height);for(let i=0;i<t.gridYSize;i++)e.stroke(255,255,255,10),e.line(0,i*e.height/t.gridYSize,e.width,i*e.height/t.gridYSize);e.endShape()}(),t.vertices.map(i),s(t.search.current_path,[255,255,255,100]),s(t.search.min_path,[0,0,255]),e.fill(255,255,255),e.textSize(20),e.text(t.getCurrPathStr(),20,20,e.width,40),e.fill(0,0,255),e.textSize(20),e.text(t.getMinPathStr(),20,60,e.width,80),t.run()}};var f=r("acw62");class v extends t(f).Component{constructor(e){super(e),this.ref=t(f).createRef(),this.sketch=g(e.simulation)}componentDidMount(){this.p5ref=new(t(o))(this.sketch,this.ref.current)}render(){return(0,h.jsx)("div",{ref:this.ref})}}class x extends t(f).Component{constructor(t){super(t),this.simulation=new p(t),this.simulation.setAlgorithm(""),this.Sketch=g(this.simulation)}render(){return(0,h.jsxs)("div",{className:"container-fluid",children:[(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsx)(a.default,{defaultValue:this.simulation.algorithmOptions[0],options:this.simulation.algorithmOptions,onChange:t=>{this.simulation.setAlgorithm(t.value)}})}),(0,h.jsx)("div",{className:"col-md-2",children:(0,h.jsx)("button",{className:"btn btn-primary",onClick:t=>{this.simulation.randomize()},children:"randomize"})}),(0,h.jsx)("div",{className:"col-md-2",children:(0,h.jsx)("button",{className:"btn btn-success",onClick:t=>{this.simulation.isActive=!this.simulation.isActive},disabled:this.simulation.isActive,children:"start/stop"})})]}),(0,h.jsx)("div",{className:"row"}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)(v,{simulation:this.simulation})})})]})}}(0,n.createRoot)(document.getElementById("app")).render((0,h.jsx)(x,{}));
//# sourceMappingURL=index.619b056a.js.map
